define("selfInfo",["jquery"],function(){return{getBackgroundImg:function(){}}});var selfAction={};$(function(){selfAction.uploadInit(),$("#video > h4").click(selfAction.getVideoList),$("#picture > h4").click(selfAction.getPictureList),$("#article > h4").click(selfAction.getArticleList),$("#music > h4").click(selfAction.getMusicList)}),selfAction.uploadInit=function(){$("#headUpload").fileupload({url:"/selfInfo/headImg?action=uploadHead",dataType:"json",maxFileSize:2e9,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewMaxWidth:100,previewMaxHeight:100,previewCrop:!0}).on("fileuploadfail",function(e,i){selfAction.modalWindow("头像上传失败!")})},selfAction.getVideoList=function(){$.post("/preview/video",function(e){var i=JSON.parse(e);if(i.err)return selfAction.modalWindow(i.statusText);var t=$(".video-content");return t.children().remove(),i.data.length?void $.each(i.data,function(e,i){var c=$("<div></div>");c.prop("class","video-preview-div");var o=$("<p></p>");o.text(++e+". "+i.title+" - "+i.date+" ").append($('<span class="glyphicon glyphicon-film" style="color: red"></span>')).prop({class:"video-preview"}),o.isClicked=!1,o.click(function(){if(this.isClicked=!this.isClicked,this.isClicked){$(this).css({"background-color":"rgba(57, 89, 128, 0.5)"});var e=$("<video>"),t=$("<p></p>");e.prop({src:i.source,controls:"controls"}).css({display:"block",width:"100%",height:"450px"}),t.append(e)}else $(this).css({"background-color":""}),$(this).css({opacity:"1"})}),c.append(o),t.append(c)}):t.append($('<p style="text-align: center"></p>').text("你还没有上传任何数据!"))},"JSON")},selfAction.getPictureList=function(){$.post("/preview/picture",function(e){var i=JSON.parse(e);if(i.err)return selfAction.modalWindow(i.statusText);var t=$(".picture-content");return t.children().remove(),i.data.length?void $.each(i.data,function(e,i){var c=$("<div></div>");c.prop("class","picture-preview-div");var o=$("<img>");o.prop({src:i.source,alt:i.title,class:"picture-preview"}),o.isClicked=!1,o.click(function(){this.isClicked=!this.isClicked,this.isClicked?(c.css({"background-color":"rgb(157,94,202)"}),$(this).css({opacity:"0.5"})):(c.css({"background-color":""}),$(this).css({opacity:"1"}))}),c.append(o),t.append(c)}):t.append($('<p style="text-align: center"></p>').text("你还没有上传任何数据!"))},"JSON")},selfAction.getArticleList=function(){$.post("/preview/article",function(e){var i=JSON.parse(e);if(i.err)return selfAction.modalWindow(i.statusText);var t=$(".article-content");return t.children().remove(),i.data.length?void $.each(i.data,function(e,i){var c=$("<div></div>");c.prop("class","article-preview-div");var o=$("<a></a>");o.text(++e+". "+i.title+" - "+i.date+" ").append($('<span class="glyphicon glyphicon-pencil" style="color : red"></span>')).prop({class:"article-preview"});var s=[];s.push("/article/",i.author,"/",i.title,"/",i.date),o.prop("openHref",s.join("")),o.click(function(){window.open($(this).attr("openHref"))}),c.append(o),t.append(c)}):t.append($('<p style="text-align: center"></p>').text("你还没有上传任何数据!"))},"JSON")},selfAction.getMusicList=function(){$.post("/preview/music",function(e){var i=JSON.parse(e);if(i.err)return selfAction.modalWindow(i.statusText);var t=$(".music-content");return t.children().remove(),i.data.length?void $.each(i.data,function(e,i){var c=$("<div></div>");c.prop("class","music-preview-div");var o=$("<p></p>");o.text(++e+". "+i.title+" - "+i.date+" ").append($('<span class="glyphicon glyphicon-music" style="color : red"></span>')).prop({class:"music-preview"}),o.isClicked=!1,o.click(function(){if(this.isClicked=!this.isClicked,this.isClicked){$(this).css({"background-color":"rgba(57, 89, 128, 0.5)"});var e=$("<audio>"),t=$("<p></p>");e.prop({src:i.source,controls:"controls"}).css({width:"100%",height:"auto"}),t.append(e)}else $(this).css({"background-color":""}),$(this).css({opacity:"1"})}),c.append(o),t.append(c)}):t.append($('<p style="text-align: center"></p>').text("你还没有上传任何数据!"))},"JSON")},selfAction.modalWindow=function(e){$(".modal-body").text(e),$("#modalWindow").modal("show",{backdrop:!0,keyboard:!0})};