function loginInit(){$("#nameCheck").toggle("fast"),$("#pswCheckGroup").toggle("fast"),$("#rememberPsw").click(function(){$("#rememberPsw").prop("checked")===!0?pageAction.rememberPsw=!0:pageAction.rememberPsw=!1}),$("#signupTitle").click(function(){$("#action").text("用户注册"),$("#nameCheck").slideDown("slow"),$("#pswCheckGroup").slideDown("slow"),pageAction.state="signup"}),$("#loginTitle").click(function(){$("#action").text("用户登录"),$("#nameCheck").slideUp("slow"),$("#pswCheckGroup").slideUp("slow"),pageAction.state="login"}),check(),$("#ok").click(function(){if(!pageAction.emailStatus)return void pageAction.modalWindow("邮箱格式不对额!");if(!pageAction.pswStatus)return void pageAction.modalWindow("密码格式有错额!");if(!pageAction.RePswStatus&&"signup"==pageAction.state)return void pageAction.modalWindow("两次填写的密码不同额!");if(""===$("#name").val()&&"signup"===pageAction.state)return void pageAction.modalWindow("至少要填一下你的昵称吧!");"login"===pageAction.state?pageAction.loginAction():pageAction.signupAction()})}define("login",["jquery"],function(){return{loginInit:loginInit,getBackgroundImg:function(){$("#backgroundImg").prop("class","background-img")},getHeadImg:function(){pageAction.loadHeadImg()}}});var pageAction={urlLogin:"/login",state:"login",email:"",name:"",password:"",emailStatus:!1,pswStatus:!1,RePswStatus:!1,rememberPsw:!1},charaAction={};pageAction.loadHeadImg=function(){$.post(pageAction.urlLogin,{action:"loadHeadImg"},function(a){pageAction.loadImgAction(a)},"JSON")},pageAction.modalWindow=function(a){$(".modal-body").text(a),$("#modalWindow").modal("show",{backdrop:!0,keyboard:!0})},pageAction.loadImgAction=function(a){var t=a.baseUrl;if(null===a.images)return void pageAction.modalWindow("服务器错误!请刷新..");for(var o=a.images,n=0;null!==o[n]&&void 0!==o[n];n++){var i=o[n],e=$("<div></div>"),c=$("<img>");c.attr({src:t+i,class:"login-icon"}),e.append(c),$(".icon-div").append(e)}},pageAction.loginAction=function(){$.post(pageAction.urlLogin,{action:pageAction.state,email:pageAction.email,password:pageAction.password,isRemember:pageAction.rememberPsw},function(a){"ok"!=a.status?pageAction.modalWindow(a.statusText):window.location.href=a.url},"JSON")},pageAction.signupAction=function(){$.post(pageAction.urlLogin,{action:pageAction.state,email:pageAction.email,password:pageAction.password,name:pageAction.name,isRemember:pageAction.rememberPsw},function(a){"ok"!=a.status?pageAction.modalWindow(a.statusText):pageAction.modalWindow(a.statusText)},"JSON")};var check=function(){$("#email").blur(function(){charaAction.emailCheck($("#email").val())?($("#emailStatus").attr({class:"glyphicon glyphicon-ok"}),pageAction.emailStatus=!0,pageAction.email=$("#email").val()):($("#emailStatus").attr({class:"glyphicon glyphicon-remove"}),pageAction.emailStatus=!1)}),$("#password").blur(function(){charaAction.charaCheck($("#password").val())?($("#pwdStatus").attr({class:"glyphicon glyphicon-ok"}),pageAction.pswStatus=!0,pageAction.password=$("#password").val()):($("#pwdStatus").attr({class:"glyphicon glyphicon-remove"}),pageAction.pswStatus=!1)}),$("#name").blur(function(){pageAction.name=$("#name").val()}),$("#pswCheck").blur(function(){$("#password").val()==$("#pswCheck").val()&&""!==$("#password").val()?($("#rePswStatus").attr({class:"glyphicon glyphicon-ok"}),pageAction.RePswStatus=!0):($("#rePswStatus").attr({class:"glyphicon glyphicon-remove"}),pageAction.RePswStatus=!0)})};charaAction.charaCheck=function(a){if(""===a)return!1;var t=/[\\*@$%^#\/]/;return!t.test(a)},charaAction.emailCheck=function(a){var t=/[0-9a-zA-Z]+@[0-9a-zA-Z]+.\w+/;return!!t.test(a)};