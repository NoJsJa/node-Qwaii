$(function(){$("#progress").hide();var e=$("#fileUpload").fileupload({url:"/upload",dataType:"json",maxFileSize:2e9,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewMaxWidth:100,previewMaxHeight:100,previewCrop:!0}).on("fileuploadadd",function(e,r){$(".progress-bar").css("width","0%"),r.context=$("<div></div>").appendTo($("#fileListDiv")),$.each(r.files,function(e,a){var n=$("<p></p>").text(a.name);n.appendTo(r.context),$("#progress").show()})}).on("fileuploadprocessalways",function(e,r){var a=r.index,n=r.files[a],t=$(r.context.children()[a]);n.preview&&t.prepend("<br>").prepend(n.preview),n.error&&t.append("<br>").append($('<span class="text-danger"/>').text(n.error)),a+1===r.files.length&&r.context.find("button").text("Upload").prop("disabled",!!r.files.error)}).on("fileuploadprogressall",function(e,r){var a=parseInt(r.loaded/r.total*100,10);$("#progress .progress-bar").css("width",a+"%")}).on("fileuploaddone",function(e,r){$.each(r.result.files,function(e,a){if(a.url){var n=$("<a>").attr("target","_blank").prop("href",a.url);$(r.context.children()[e]).wrap(n)}else if(a.error){var t=$('<span class="text-danger"/>').text(a.error);$(r.context.children()[e]).append("<br>").append(t)}})}).on("fileuploadfail",function(e,r){$.each(r.files,function(e,a){var n=$('<span class="text-danger"/>').text("File upload failed.");$(r.context.children()[e]).append("<br>").append(n)})}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled");$("#cancel").click(function(){e.abort()})});